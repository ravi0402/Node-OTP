'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var querystring = require('querystring');

var initialized = false;
var msgpath = { host: 'rest.nexmo.com', path: '/sms/json' };
var shortcodePath = { host: 'rest.nexmo.com', path: '/sc/us/${type}/json' };
var ttsEndpoint = { host: 'api.nexmo.com', path: '/tts/json' };
var ttsPromptEndpoint = { host: 'api.nexmo.com', path: '/tts-prompt/json' };
var callEndpoint = { host: 'rest.nexmo.com', path: '/call/json' };
var verifyEndpoint = { host: 'api.nexmo.com', path: '/verify/json' };
var checkVerifyEndpoint = { host: 'api.nexmo.com', path: '/verify/check/json' };
var controlVerifyEndpoint = { host: 'api.nexmo.com', path: '/verify/control/json' };
var searchVerifyEndpoint = { host: 'api.nexmo.com', path: '/verify/search/json' };
var niEndpoint = { host: 'api.nexmo.com', path: '/ni/advanced/async/json' };
var niBasicEndpoint = { host: 'api.nexmo.com', path: '/ni/basic/json' };
var niStandardEndpoint = { host: 'api.nexmo.com', path: '/ni/standard/json' };
var niAdvancedEndpoint = { host: 'api.nexmo.com', path: '/ni/advanced/json' };
var applicationsEndpoint = { host: 'api.nexmo.com', path: '/v1/applications' };
var up = {};
var numberPattern = new RegExp("^[0-9 +()-]*$");
var _options = null;

//Error message resources are maintained globally in one place for easy management
var ERROR_MESSAGES = {
    sender: 'Invalid from address',
    to: 'Invalid to address',
    msg: 'Invalid Text Message',
    msgParams: 'Invalid shortcode message parameters',
    countrycode: 'Invalid Country Code',
    msisdn: 'Invalid MSISDN passed',
    body: 'Invalid Body value in Binary Message',
    udh: 'Invalid udh value in Binary Message',
    title: 'Invalid title in WAP Push message',
    url: 'Invalid url in WAP Push message',
    maxDigits: 'Invalid max digits for TTS prompt',
    byeText: 'Invalid bye text for TTS prompt',
    pinCode: 'Invalid pin code for TTS confirm',
    failedText: 'Invalid failed text for TTS confirm',
    answerUrl: 'Invalid answer URL for call',
    verifyValidation: 'Missing Mandatory fields (number and/or brand)',
    checkVerifyValidation: 'Missing Mandatory fields (request_id and/or code)',
    controlVerifyValidation: 'Missing Mandatory fields (request_id and/or cmd-command)',
    searchVerifyValidation: 'Missing Mandatory fields (request_id or request_ids)',
    numberInsightAdvancedValidation: 'Missing Mandatory fields (number and/or callback url)',
    numberInsightValidation: 'Missing Mandatory field - number',
    numberInsightPatternFailure: 'Number can contain digits and may include any or all of the following: white space, -,+, (, ).',
    optionsNotAnObject: 'Options parameter should be a dictionary. Check the docs for valid properties for options',
    applicationName: 'Invalid argument: name',
    applicationType: 'Invalid argument: type (valid options: [voice])',
    applicationAnswerUrl: 'Invalid argument: answerUrl',
    applicationEventUrl: 'Invalid argument: eventUrl',
    applicationId: 'Invalid argument: appId',
    product: 'Invalid product. Should be one of [voice, sms]'
};

exports.initialize = function (pkey, psecret, options) {
    if (!pkey || !psecret) {
        throw 'key and secret cannot be empty, set valid values';
    }
    up = {
        api_key: pkey,
        api_secret: psecret
    };
    _options = options;
    initialized = true;
};

exports.sendBinaryMessage = function (sender, recipient, body, udh, callback) {
    if (!body) {
        sendError(callback, new Error(ERROR_MESSAGES.body));
    } else if (!udh) {
        sendError(callback, new Error(ERROR_MESSAGES.udh));
    } else {
        sendMessage({
            from: sender,
            to: recipient,
            type: 'binary',
            body: body,
            udh: udh
        }, callback);
    }
};

exports.sendWapPushMessage = function (sender, recipient, title, url, validity, callback) {
    if (!title) {
        sendError(callback, new Error(ERROR_MESSAGES.title));
    } else if (!url) {
        sendError(callback, new Error(ERROR_MESSAGES.url));
    } else {
        if (typeof validity == 'function') {
            callback = validity;
            validity = 86400000;
        }
        sendMessage({
            from: sender,
            to: recipient,
            type: 'wappush',
            title: title,
            validity: validity,
            url: url
        }, callback);
    }
};

exports.sendTextMessage = function (sender, recipient, message, opts, callback) {
    if (!message) {
        sendError(callback, new Error(ERROR_MESSAGES.msg));
    } else {
        if (!callback) {
            callback = opts;
            opts = {};
        }
        opts['from'] = sender;
        opts['to'] = recipient;
        opts['text'] = message;
        sendMessage(opts, callback);
    }
};

exports.sendMessage = function (opts, callback) {
    sendMessage(opts, callback);
};
function sendMessage(data, callback) {
    if (!data.from) {
        sendError(callback, new Error(ERROR_MESSAGES.sender));
    } else if (!data.to) {
        sendError(callback, new Error(ERROR_MESSAGES.to));
    } else {
        var path = clone(msgpath);
        path.path += '?' + querystring.stringify(data);
        _options.logger.info('sending message from ' + data.from + ' to ' + data.to + ' with message ' + data.text);
        sendRequest(path, 'POST', function (err, apiResponse) {
            if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {
                sendError(callback, new Error(apiResponse.messages[0]['error-text']), apiResponse);
            } else {
                if (callback) callback(err, apiResponse);
            }
        });
    }
}

function sendViaShortcode(type, recipient, messageParams, opts, callback) {
    if (!recipient) {
        sendError(callback, new Error(ERROR_MESSAGES.to));
    }
    if (!messageParams || !Object.keys(messageParams)) {
        sendError(callback, new Error(ERROR_MESSAGES.msgParams));
    }
    opts = opts || {};
    var path = clone(shortcodePath);
    path.path = path.path.replace('${type}', type);
    Object.keys(messageParams).forEach(function (key) {
        opts[key] = messageParams[key];
    });
    opts.to = recipient;
    path.path += '?' + querystring.stringify(opts);
    _options.logger.info('sending message from shortcode ' + type + ' to ' + recipient + ' with parameters ' + JSON.stringify(messageParams));
    sendRequest(path, 'POST', function (err, apiResponse) {
        if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {
            sendError(callback, new Error(apiResponse.messages[0]['error-text']), apiResponse);
        } else {
            if (callback) callback(err, apiResponse);
        }
    });
}
exports.shortcodeAlert = function (recipient, messageParams, opts, callback) {
    sendViaShortcode('alert', recipient, messageParams, opts, callback);
};
exports.shortcode2FA = function (recipient, messageParams, opts, callback) {
    sendViaShortcode('2fa', recipient, messageParams, opts, callback);
};
exports.shortcodeMarketing = function (recipient, messageParams, opts, callback) {
    sendViaShortcode('marketing', recipient, messageParams, opts, callback);
};

function clone(a) {
    return JSON.parse(JSON.stringify(a));
}

function getEndpoint(action) {
    return { path: action };
}

function sendRequest(endpoint, method, callback) {
    endpoint.path = endpoint.path + (endpoint.path.indexOf('?') > 0 ? '&' : '?') + querystring.stringify(up);
    _options.httpClient.request(endpoint, method, callback);
}

exports.checkBalance = function (callback) {
    var balanceEndpoint = getEndpoint('/account/get-balance');
    sendRequest(balanceEndpoint, callback);
};

exports.getPricing = function (countryCode, callback) {
    if (!countryCode || countryCode.length != 2) {
        sendError(callback, new Error(ERROR_MESSAGES.countrycode));
    } else {
        var pricingEndpoint = getEndpoint('/account/get-pricing/outbound');
        pricingEndpoint.path += '?country=' + countryCode;
        sendRequest(pricingEndpoint, callback);
    }
};

exports.getPhonePricing = function (product, msisdn, callback) {
    if (!product || product != 'sms' && product != 'voice') {
        sendError(callback, new Error(ERROR_MESSAGES.product));
    } else if (!msisdn || msisdn.length < 10) {
        // check if MSISDN validation is correct for international numbers
        sendError(callback, new Error(ERROR_MESSAGES.msisdn));
    } else {
        var pricingEndpoint = getEndpoint('/account/get-phone-pricing/outbound');
        pricingEndpoint.path += "/" + product + "/" + up.api_key + "/" + up.api_secret + "/" + msisdn;
        sendRequest(pricingEndpoint, callback);
    }
};

exports.getNumbers = function (options, callback) {
    var numbersEndpoint = getEndpoint('/account/numbers');
    if (typeof options == 'function') {
        callback = options;
    } else if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) == 'object') {
        numbersEndpoint.path = numbersEndpoint.path + '?';
        for (var key in options) {
            numbersEndpoint.path = numbersEndpoint.path + key + '=' + options[key] + '&';
        }
    } else {
        sendError(callback, new Error(ERROR_MESSAGES.optionsNotAnObject));
        return;
    }
    sendRequest(numbersEndpoint, callback);
};

exports.searchNumbers = function (countryCode, pattern, callback) {
    if (!countryCode || countryCode.length != 2) {
        sendError(callback, new Error(ERROR_MESSAGES.countrycode));
    } else {
        var searchEndpoint = getEndpoint('/number/search');
        searchEndpoint.path += '?country=' + countryCode;
        if (typeof pattern == 'function') {
            callback = pattern;
        } else if ((typeof pattern === 'undefined' ? 'undefined' : _typeof(pattern)) == 'object') {
            searchEndpoint.path = searchEndpoint.path + '&';
            for (var arg in pattern) {
                searchEndpoint.path = searchEndpoint.path + arg + '=' + pattern[arg] + '&';
            }
        } else {
            searchEndpoint.path = searchEndpoint.path + '&pattern=' + pattern;
        }
        sendRequest(searchEndpoint, callback);
    }
};

exports.buyNumber = function (countryCode, msisdn, callback) {
    if (!countryCode || countryCode.length != 2) {
        sendError(callback, new Error(ERROR_MESSAGES.countrycode));
    } else if (!msisdn || msisdn.length < 10) {
        // check if MSISDN validation is correct for international numbers
        sendError(callback, new Error(ERROR_MESSAGES.msisdn));
    } else {
        var buyEndpoint = getEndpoint('/number/buy');
        buyEndpoint.path += '?country=' + countryCode + '&msisdn=' + msisdn;
        sendRequest(buyEndpoint, 'POST', callback);
    }
};

exports.cancelNumber = function (countryCode, msisdn, callback) {
    if (!countryCode || countryCode.length != 2) {
        sendError(callback, new Error(ERROR_MESSAGES.countrycode));
    } else if (!msisdn || msisdn.length < 10) {
        sendError(callback, new Error(ERROR_MESSAGES.msisdn));
    } else {
        var cancelEndpoint = getEndpoint('/number/cancel');
        cancelEndpoint.path += '?country=' + countryCode + '&msisdn=' + msisdn;
        sendRequest(cancelEndpoint, 'POST', callback);
    }
};

exports.cancelNumber = function (countryCode, msisdn, callback) {
    if (!countryCode || countryCode.length != 2) {
        sendError(callback, new Error(ERROR_MESSAGES.countrycode));
    } else if (!msisdn || msisdn.length < 10) {
        sendError(callback, new Error(ERROR_MESSAGES.msisdn));
    } else {
        var cancelEndpoint = getEndpoint('/number/cancel');
        cancelEndpoint.path += '?country=' + countryCode + '&msisdn=' + msisdn;
        sendRequest(cancelEndpoint, 'POST', callback);
    }
};

exports.updateNumber = function (countryCode, msisdn, params, callback) {
    if (!countryCode || countryCode.length != 2) {
        sendError(callback, new Error(ERROR_MESSAGES.countrycode));
    } else if (!msisdn || msisdn.length < 10) {
        sendError(callback, new Error(ERROR_MESSAGES.msisdn));
    } else {
        var updateEndpoint = getEndpoint('/number/update');
        updateEndpoint.path += '?country=' + countryCode + '&msisdn=' + msisdn;
        updateEndpoint.path = updateEndpoint.path + '&';
        for (var arg in params) {
            updateEndpoint.path = updateEndpoint.path + arg + '=' + encodeURIComponent(params[arg]) + '&';
        }
        sendRequest(updateEndpoint, 'POST', callback);
    }
};

exports.getApplications = function (options, callback) {
    var endpoint = getEndpoint(applicationsEndpoint.path);
    endpoint.host = applicationsEndpoint.host;
    if (typeof options == 'function') {
        callback = options;
    } else if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) == 'object') {
        endpoint.path += '?';
        for (var key in options) {
            endpoint.path += key + '=' + options[key] + '&';
        }
    } else {
        sendError(callback, new Error(ERROR_MESSAGES.optionsNotAnObject));
        return;
    }
    sendRequest(endpoint, callback);
};

exports.createApplication = function (name, type, answerUrl, eventUrl, options, callback) {
    if (!name || name.length < 1) {
        sendError(callback, new Error(ERROR_MESSAGES.applicationName));
    } else if (!type || type != 'voice') {
        sendError(callback, new Error(ERROR_MESSAGES.applicationType));
    } else if (!answerUrl) {
        sendError(callback, new Error(ERROR_MESSAGES.applicationAnswerUrl));
    } else if (!eventUrl) {
        sendError(callback, new Error(ERROR_MESSAGES.applicationEventUrl));
    } else {
        var createEndpoint = getEndpoint(applicationsEndpoint.path);
        createEndpoint.host = applicationsEndpoint.host;
        createEndpoint.path += '?name=' + encodeURIComponent(name) + '&type=' + type + '&answer_url=' + answerUrl + '&event_url=' + eventUrl;
        for (var key in options) {
            createEndpoint.path += '&' + key + '=' + options[key];
        }
        sendRequest(createEndpoint, 'POST', callback);
    }
};

exports.getApplication = function (appId, callback) {
    if (!appId || appId.length < 36) {
        sendError(callback, new Error(ERROR_MESSAGES.applicationId));
    } else {
        var showEndpoint = getEndpoint(applicationsEndpoint.path + "/" + appId);
        showEndpoint.host = applicationsEndpoint.host;
        sendRequest(showEndpoint, callback);
    }
};

exports.updateApplication = function (appId, name, type, answerUrl, eventUrl, options, callback) {
    if (!appId || appId.length < 36) {
        sendError(callback, new Error(ERROR_MESSAGES.applicationId));
    } else if (!name || name.length < 1) {
        sendError(callback, new Error(ERROR_MESSAGES.applicationName));
    } else if (!type || type != 'voice') {
        sendError(callback, new Error(ERROR_MESSAGES.applicationType));
    } else if (!answerUrl) {
        sendError(callback, new Error(ERROR_MESSAGES.applicationAnswerUrl));
    } else if (!eventUrl) {
        sendError(callback, new Error(ERROR_MESSAGES.applicationEventUrl));
    } else {
        var updateEndpoint = getEndpoint(applicationsEndpoint.path + "/" + appId);
        updateEndpoint.path += '?name=' + encodeURIComponent(name) + '&type=' + type + '&answer_url=' + answerUrl + '&event_url=' + eventUrl;
        updateEndpoint.host = applicationsEndpoint.host;
        for (var key in options) {
            updateEndpoint.path = updateEndpoint.path + '&' + key + '=' + options[key];
        }
        sendRequest(updateEndpoint, 'PUT', callback);
    }
};

exports.deleteApplication = function (appId, callback) {
    if (!appId || appId.length < 36) {
        sendError(callback, new Error(ERROR_MESSAGES.applicationId));
    } else {
        var deleteEndpoint = getEndpoint(applicationsEndpoint.path + "/" + appId);
        deleteEndpoint.host = applicationsEndpoint.host;
        sendRequest(deleteEndpoint, 'DELETE', callback);
    }
};

exports.changePassword = function (newSecret, callback) {
    var settingsEndpoint = getEndpoint('/account/settings');
    settingsEndpoint.path += '?newSecret=' + encodeURIComponent(newSecret);
    sendRequest(settingsEndpoint, 'POST', callback);
};

exports.changeMoCallbackUrl = function (newUrl, callback) {
    var settingsEndpoint = getEndpoint('/account/settings');
    settingsEndpoint.path += '?moCallBackUrl=' + encodeURIComponent(newUrl);
    sendRequest(settingsEndpoint, 'POST', callback);
};

exports.changeDrCallbackUrl = function (newUrl, callback) {
    var settingsEndpoint = getEndpoint('/account/settings');
    settingsEndpoint.path += '?drCallBackUrl=' + encodeURIComponent(newUrl);
    sendRequest(settingsEndpoint, 'POST', callback);
};

exports.verifyNumber = function (inputParams, callback) {
    if (!inputParams.number || !inputParams.brand) {
        sendError(callback, new Error(ERROR_MESSAGES.verifyValidation));
    } else {
        var vEndpoint = clone(verifyEndpoint);
        vEndpoint.path += '?' + querystring.stringify(inputParams);
        sendRequest(vEndpoint, callback);
    }
};

exports.checkVerifyRequest = function (inputParams, callback) {
    if (!inputParams.request_id || !inputParams.code) {
        sendError(callback, new Error(ERROR_MESSAGES.checkVerifyValidation));
    } else {
        var vEndpoint = clone(checkVerifyEndpoint);
        vEndpoint.path += '?' + querystring.stringify(inputParams);
        sendRequest(vEndpoint, callback);
    }
};

exports.controlVerifyRequest = function (inputParams, callback) {
    if (!inputParams.request_id || !inputParams.cmd) {
        sendError(callback, new Error(ERROR_MESSAGES.controlVerifyValidation));
    } else {
        var vEndpoint = clone(controlVerifyEndpoint);
        vEndpoint.path += '?' + querystring.stringify(inputParams);
        sendRequest(vEndpoint, callback);
    }
};

exports.searchVerifyRequest = function (requestIds, callback) {
    var requestIdParam = {};
    if (!requestIds) {
        sendError(callback, new Error(ERROR_MESSAGES.searchVerifyValidation));
    } else {
        if (Array.isArray(requestIds)) {
            if (requestIds.length == 1) {
                requestIdParam.request_id = requestIds;
            } else {
                requestIdParam.request_ids = requestIds;
            }
        } else {
            requestIdParam.request_id = requestIds;
        }
        var vEndpoint = clone(searchVerifyEndpoint);
        vEndpoint.path += '?' + querystring.stringify(requestIdParam);
        sendRequest(vEndpoint, callback);
    }
};

exports.numberInsight = function (inputParams, callback) {
    numberInsightAsync(inputParams, callback);
};

exports.numberInsightBasic = function (inputParams, callback) {
    numberInsightCommon(niBasicEndpoint, inputParams, callback);
};

exports.numberInsightStandard = function (inputParams, callback) {
    numberInsightCommon(niStandardEndpoint, inputParams, callback);
};

exports.numberInsightAdvanced = function (inputParams, callback) {
    numberInsightCommon(niAdvancedEndpoint, inputParams, callback);
};

exports.numberInsightAdvancedAsync = function (inputParams, callback) {
    numberInsightAsync(inputParams, callback);
};

function numberInsightAsync(inputParams, callback) {
    if (!inputParams.number || !inputParams.callback) {
        sendError(callback, new Error(ERROR_MESSAGES.numberInsightAdvancedValidation));
    } else {
        var nEndpoint = clone(niEndpoint);
        nEndpoint.path += '?' + querystring.stringify(inputParams);
        sendRequest(nEndpoint, callback);
    }
}

function numberInsightCommon(endpoint, inputParams, callback) {
    if (validateNumber(inputParams, callback)) {
        var inputObj;
        if ((typeof inputParams === 'undefined' ? 'undefined' : _typeof(inputParams)) != 'object') {
            inputObj = { number: inputParams };
        } else {
            inputObj = inputParams;
        }
        var nEndpoint = clone(endpoint);
        nEndpoint.path += '?' + querystring.stringify(inputObj);
        sendRequest(nEndpoint, callback);
    }
}
function validateNumber(inputParams, callback) {
    if ((typeof inputParams === 'undefined' ? 'undefined' : _typeof(inputParams)) == 'object' && !inputParams.number) {
        sendError(callback, new Error(ERROR_MESSAGES.numberInsightValidation));
        return false;
    } else if ((typeof inputParams === 'undefined' ? 'undefined' : _typeof(inputParams)) == 'object' && !numberPattern.test(inputParams.number)) {
        sendError(callback, new Error(ERROR_MESSAGES.numberInsightPatternFailure));
        return false;
    } else if ((typeof inputParams === 'undefined' ? 'undefined' : _typeof(inputParams)) != 'object' && (!inputParams || !numberPattern.test(inputParams))) {
        sendError(callback, new Error(ERROR_MESSAGES.numberInsightPatternFailure));
        return false;
    }
    return true;
}

function sendVoiceMessage(voiceEndpoint, data, callback) {
    if (!data.to) {
        sendError(callback, new Error(ERROR_MESSAGES.to));
    } else {
        var endpoint = clone(voiceEndpoint);
        endpoint.path += '?' + querystring.stringify(data);
        _options.logger.info('sending TTS message to ' + data.to + ' with message ' + data.text);
        sendRequest(endpoint, 'POST', function (err, apiResponse) {
            if (!err && apiResponse.status && apiResponse.status > 0) {
                sendError(callback, new Error(apiResponse['error-text']), apiResponse);
            } else {
                if (callback) callback(err, apiResponse);
            }
        });
    }
}

exports.sendTTSMessage = function (recipient, message, opts, callback) {
    if (!message) {
        sendError(callback, new Error(ERROR_MESSAGES.msg));
    } else {
        if (!opts) {
            opts = {};
        }
        opts['to'] = recipient;
        opts['text'] = message;
        sendVoiceMessage(ttsEndpoint, opts, callback);
    }
};

exports.sendTTSPromptWithCapture = function (recipient, message, maxDigits, byeText, opts, callback) {
    if (!message) {
        sendError(callback, new Error(ERROR_MESSAGES.msg));
    } else if (!maxDigits || isNaN(maxDigits) || maxDigits.length > 16) {
        sendError(callback, new Error(ERROR_MESSAGES.maxDigits));
    } else if (!byeText) {
        sendError(callback, new Error(ERROR_MESSAGES.byeText));
    } else {
        if (!opts) {
            opts = {};
        }
        opts['to'] = recipient;
        opts['text'] = message;
        opts['max_digits'] = maxDigits;
        opts['bye_text'] = byeText;
        sendVoiceMessage(ttsPromptEndpoint, opts, callback);
    }
};

exports.sendTTSPromptWithConfirm = function (recipient, message, maxDigits, pinCode, byeText, failedText, opts, callback) {
    if (!message) {
        sendError(callback, new Error(ERROR_MESSAGES.msg));
    } else if (!maxDigits || isNaN(maxDigits) || maxDigits.length > 16) {
        sendError(callback, new Error(ERROR_MESSAGES.maxDigits));
    } else if (!pinCode || pinCode.length !== maxDigits) {
        sendError(callback, new Error(ERROR_MESSAGES.pinCode));
    } else if (!byeText) {
        sendError(callback, new Error(ERROR_MESSAGES.byeText));
    } else if (!failedText) {
        sendError(callback, new Error(ERROR_MESSAGES.failedText));
    } else {
        if (!opts) {
            opts = {};
        }
        opts['to'] = recipient;
        opts['text'] = message;
        opts['max_digits'] = maxDigits;
        opts['pin_code'] = pinCode;
        opts['bye_text'] = byeText;
        opts['failed_text'] = failedText;
        sendVoiceMessage(ttsPromptEndpoint, opts, callback);
    }
};

exports.call = function (recipient, answerUrl, opts, callback) {
    if (!answerUrl) {
        sendError(callback, new Error(ERROR_MESSAGES.answerUrl));
    } else {
        if (!opts) {
            opts = {};
        }
        opts['to'] = recipient;
        opts['answer_url'] = answerUrl;
        sendVoiceMessage(callEndpoint, opts, callback);
    }
};

function sendError(callback, err, returnData) {
    // Throw the error in case if there is no callback passed
    if (callback) {
        callback(err, returnData);
    } else {
        throw err;
    }
}

exports.setHost = function (aHost) {
    msgpath.host = aHost;
    shortcodePath.host = aHost;
    ttsEndpoint.host = aHost;
    ttsPromptEndpoint.host = aHost;
    callEndpoint.host = aHost;
    verifyEndpoint.host = aHost;
    checkVerifyEndpoint.host = aHost;
    controlVerifyEndpoint.host = aHost;
    searchVerifyEndpoint.host = aHost;
    niEndpoint.host = aHost;
    niBasicEndpoint.host = aHost;
    niStandardEndpoint.host = aHost;
    applicationsEndpoint.host = aHost;
};

exports.setPort = function (aPort) {
    port = aPort;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJxdWVyeXN0cmluZyIsInJlcXVpcmUiLCJpbml0aWFsaXplZCIsIm1zZ3BhdGgiLCJob3N0IiwicGF0aCIsInNob3J0Y29kZVBhdGgiLCJ0dHNFbmRwb2ludCIsInR0c1Byb21wdEVuZHBvaW50IiwiY2FsbEVuZHBvaW50IiwidmVyaWZ5RW5kcG9pbnQiLCJjaGVja1ZlcmlmeUVuZHBvaW50IiwiY29udHJvbFZlcmlmeUVuZHBvaW50Iiwic2VhcmNoVmVyaWZ5RW5kcG9pbnQiLCJuaUVuZHBvaW50IiwibmlCYXNpY0VuZHBvaW50IiwibmlTdGFuZGFyZEVuZHBvaW50IiwibmlBZHZhbmNlZEVuZHBvaW50IiwiYXBwbGljYXRpb25zRW5kcG9pbnQiLCJ1cCIsIm51bWJlclBhdHRlcm4iLCJSZWdFeHAiLCJfb3B0aW9ucyIsIkVSUk9SX01FU1NBR0VTIiwic2VuZGVyIiwidG8iLCJtc2ciLCJtc2dQYXJhbXMiLCJjb3VudHJ5Y29kZSIsIm1zaXNkbiIsImJvZHkiLCJ1ZGgiLCJ0aXRsZSIsInVybCIsIm1heERpZ2l0cyIsImJ5ZVRleHQiLCJwaW5Db2RlIiwiZmFpbGVkVGV4dCIsImFuc3dlclVybCIsInZlcmlmeVZhbGlkYXRpb24iLCJjaGVja1ZlcmlmeVZhbGlkYXRpb24iLCJjb250cm9sVmVyaWZ5VmFsaWRhdGlvbiIsInNlYXJjaFZlcmlmeVZhbGlkYXRpb24iLCJudW1iZXJJbnNpZ2h0QWR2YW5jZWRWYWxpZGF0aW9uIiwibnVtYmVySW5zaWdodFZhbGlkYXRpb24iLCJudW1iZXJJbnNpZ2h0UGF0dGVybkZhaWx1cmUiLCJvcHRpb25zTm90QW5PYmplY3QiLCJhcHBsaWNhdGlvbk5hbWUiLCJhcHBsaWNhdGlvblR5cGUiLCJhcHBsaWNhdGlvbkFuc3dlclVybCIsImFwcGxpY2F0aW9uRXZlbnRVcmwiLCJhcHBsaWNhdGlvbklkIiwicHJvZHVjdCIsImV4cG9ydHMiLCJpbml0aWFsaXplIiwicGtleSIsInBzZWNyZXQiLCJvcHRpb25zIiwiYXBpX2tleSIsImFwaV9zZWNyZXQiLCJzZW5kQmluYXJ5TWVzc2FnZSIsInJlY2lwaWVudCIsImNhbGxiYWNrIiwic2VuZEVycm9yIiwiRXJyb3IiLCJzZW5kTWVzc2FnZSIsImZyb20iLCJ0eXBlIiwic2VuZFdhcFB1c2hNZXNzYWdlIiwidmFsaWRpdHkiLCJzZW5kVGV4dE1lc3NhZ2UiLCJtZXNzYWdlIiwib3B0cyIsImRhdGEiLCJjbG9uZSIsInN0cmluZ2lmeSIsImxvZ2dlciIsImluZm8iLCJ0ZXh0Iiwic2VuZFJlcXVlc3QiLCJlcnIiLCJhcGlSZXNwb25zZSIsInN0YXR1cyIsIm1lc3NhZ2VzIiwic2VuZFZpYVNob3J0Y29kZSIsIm1lc3NhZ2VQYXJhbXMiLCJPYmplY3QiLCJrZXlzIiwicmVwbGFjZSIsImZvckVhY2giLCJrZXkiLCJKU09OIiwic2hvcnRjb2RlQWxlcnQiLCJzaG9ydGNvZGUyRkEiLCJzaG9ydGNvZGVNYXJrZXRpbmciLCJhIiwicGFyc2UiLCJnZXRFbmRwb2ludCIsImFjdGlvbiIsImVuZHBvaW50IiwibWV0aG9kIiwiaW5kZXhPZiIsImh0dHBDbGllbnQiLCJyZXF1ZXN0IiwiY2hlY2tCYWxhbmNlIiwiYmFsYW5jZUVuZHBvaW50IiwiZ2V0UHJpY2luZyIsImNvdW50cnlDb2RlIiwibGVuZ3RoIiwicHJpY2luZ0VuZHBvaW50IiwiZ2V0UGhvbmVQcmljaW5nIiwiZ2V0TnVtYmVycyIsIm51bWJlcnNFbmRwb2ludCIsInNlYXJjaE51bWJlcnMiLCJwYXR0ZXJuIiwic2VhcmNoRW5kcG9pbnQiLCJhcmciLCJidXlOdW1iZXIiLCJidXlFbmRwb2ludCIsImNhbmNlbE51bWJlciIsImNhbmNlbEVuZHBvaW50IiwidXBkYXRlTnVtYmVyIiwicGFyYW1zIiwidXBkYXRlRW5kcG9pbnQiLCJlbmNvZGVVUklDb21wb25lbnQiLCJnZXRBcHBsaWNhdGlvbnMiLCJjcmVhdGVBcHBsaWNhdGlvbiIsIm5hbWUiLCJldmVudFVybCIsImNyZWF0ZUVuZHBvaW50IiwiZ2V0QXBwbGljYXRpb24iLCJhcHBJZCIsInNob3dFbmRwb2ludCIsInVwZGF0ZUFwcGxpY2F0aW9uIiwiZGVsZXRlQXBwbGljYXRpb24iLCJkZWxldGVFbmRwb2ludCIsImNoYW5nZVBhc3N3b3JkIiwibmV3U2VjcmV0Iiwic2V0dGluZ3NFbmRwb2ludCIsImNoYW5nZU1vQ2FsbGJhY2tVcmwiLCJuZXdVcmwiLCJjaGFuZ2VEckNhbGxiYWNrVXJsIiwidmVyaWZ5TnVtYmVyIiwiaW5wdXRQYXJhbXMiLCJudW1iZXIiLCJicmFuZCIsInZFbmRwb2ludCIsImNoZWNrVmVyaWZ5UmVxdWVzdCIsInJlcXVlc3RfaWQiLCJjb2RlIiwiY29udHJvbFZlcmlmeVJlcXVlc3QiLCJjbWQiLCJzZWFyY2hWZXJpZnlSZXF1ZXN0IiwicmVxdWVzdElkcyIsInJlcXVlc3RJZFBhcmFtIiwiQXJyYXkiLCJpc0FycmF5IiwicmVxdWVzdF9pZHMiLCJudW1iZXJJbnNpZ2h0IiwibnVtYmVySW5zaWdodEFzeW5jIiwibnVtYmVySW5zaWdodEJhc2ljIiwibnVtYmVySW5zaWdodENvbW1vbiIsIm51bWJlckluc2lnaHRTdGFuZGFyZCIsIm51bWJlckluc2lnaHRBZHZhbmNlZCIsIm51bWJlckluc2lnaHRBZHZhbmNlZEFzeW5jIiwibkVuZHBvaW50IiwidmFsaWRhdGVOdW1iZXIiLCJpbnB1dE9iaiIsInRlc3QiLCJzZW5kVm9pY2VNZXNzYWdlIiwidm9pY2VFbmRwb2ludCIsInNlbmRUVFNNZXNzYWdlIiwic2VuZFRUU1Byb21wdFdpdGhDYXB0dXJlIiwiaXNOYU4iLCJzZW5kVFRTUHJvbXB0V2l0aENvbmZpcm0iLCJjYWxsIiwicmV0dXJuRGF0YSIsInNldEhvc3QiLCJhSG9zdCIsInNldFBvcnQiLCJhUG9ydCIsInBvcnQiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FBRUEsSUFBSUEsY0FBY0MsUUFBUSxhQUFSLENBQWxCOztBQUVBLElBQUlDLGNBQWMsS0FBbEI7QUFDQSxJQUFJQyxVQUFVLEVBQUNDLE1B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ZjtBQUNBNUssa0JBQWNGLElBQWQsR0FBcUI4SyxLQUFyQjtBQUNBM0ssZ0JBQVlILElBQVosR0FBbUI4SyxLQUFuQjtBQUNBMUssc0JBQWtCSixJQUFsQixHQUF5QjhLLEtBQXpCO0FBQ0F6SyxpQkFBYUwsSUFBYixHQUFvQjhLLEtBQXBCO0FBQ0F4SyxtQkFBZU4sSUFBZixHQUFzQjhLLEtBQXRCO0FBQ0F2Syx3QkFBb0JQLElBQXBCLEdBQTJCOEssS0FBM0I7QUFDQXRLLDBCQUFzQlIsSUFBdEIsR0FBNkI4SyxLQUE3QjtBQUNBcksseUJBQXFCVCxJQUFyQixHQUE0QjhLLEtBQTVCO0FBQ0FwSyxlQUFXVixJQUFYLEdBQWtCOEssS0FBbEI7QUFDRm5LLG9CQUFnQlgsSUFBaEIsR0FBdUI4SyxLQUF2QjtBQUNBbEssdUJBQW1CWixJQUFuQixHQUEwQjhLLEtBQTFCO0FBQ0FoSyx5QkFBcUJkLElBQXJCLEdBQTRCOEssS0FBNUI7QUFDRCxDQWREOztBQWdCQTdILFFBQVE4SCxPQUFSLEdBQWtCLFVBQVNDLEtBQVQsRUFBZ0I7QUFDaENDLFdBQU9ELEtBQVA7QUFDRCxDQUZEIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcXVlcnlzdHJpbmcgPSByZXF1aXJlKCdxdWVyeXN0cmluZycpO1xuXG52YXIgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbnZhciBtc2dwYXRoID0ge2hvc3Q6J3Jlc3QubmV4bW8uY29tJyxwYXRoOicvc21zL2pzb24nfTtcbnZhciBzaG9ydGNvZGVQYXRoID0ge2hvc3Q6J3Jlc3QubmV4bW8uY29tJyxwYXRoOicvc2MvdXMvJHt0eXBlfS9qc29uJ307XG52YXIgdHRzRW5kcG9pbnQgPSB7aG9zdDonYXBpLm5leG1vLmNvbScscGF0aDonL3R0cy9qc29uJ307XG52YXIgdHRzUHJvbXB0RW5kcG9pbnQgPSB7aG9zdDonYXBpLm5leG1vLmNvbScscGF0aDonL3R0cy1wcm9tcHQvanNvbid9O1xudmFyIGNhbGxFbmRwb2ludCA9IHtob3N0OidyZXN0Lm5leG1vLmNvbScscGF0aDonL2NhbGwvanNvbid9O1xudmFyIHZlcmlmeUVuZHBvaW50ID0ge2hvc3Q6J2FwaS5uZXhtby5jb20nLHBhdGg6Jy92ZXJpZnkvanNvbid9O1xudmFyIGNoZWNrVmVyaWZ5RW5kcG9pbnQgPSB7aG9zdDonYXBpLm5leG1vLmNvbScscGF0aDonL3ZlcmlmeS9jaGVjay9qc29uJ307XG52YXIgY29udHJvbFZlcmlmeUVuZHBvaW50ID0ge2hvc3Q6J2FwaS5uZXhtby5jb20nLHBhdGg6Jy92ZXJpZnkvY29udHJvbC9qc29uJ307XG52YXIgc2VhcmNoVmVyaWZ5RW5kcG9pbnQgPSB7aG9zdDonYXBpLm5leG1vLmNvbScscGF0aDonL3ZlcmlmeS9zZWFyY2gvanNvbid9O1xudmFyIG5pRW5kcG9pbnQgPSB7aG9zdDonYXBpLm5leG1vLmNvbScscGF0aDonL25pL2FkdmFuY2VkL2FzeW5jL2pzb24nfTtcbnZhciBuaUJhc2ljRW5kcG9pbnQgPSB7aG9zdDonYXBpLm5leG1vLmNvbScscGF0aDonL25pL2Jhc2ljL2pzb24nfTtcbnZhciBuaVN0YW5kYXJkRW5kcG9pbnQgPSB7aG9zdDonYXBpLm5leG1vLmNvbScscGF0aDonL25pL3N0YW5kYXJkL2pzb24nfTtcbnZhciBuaUFkdmFuY2VkRW5kcG9pbnQgPSB7aG9zdDonYXBpLm5leG1vLmNvbScscGF0aDonL25pL2FkdmFuY2VkL2pzb24nfTtcbnZhciBhcHBsaWNhdGlvbnNFbmRwb2ludCA9IHtob3N0OidhcGkubmV4bW8uY29tJyxwYXRoOicvdjEvYXBwbGljYXRpb25zJ307XG52YXIgdXAgPSB7fTtcbnZhciBudW1iZXJQYXR0ZXJuID0gbmV3IFJlZ0V4cChcIl5bMC05ICsoKS1dKiRcIik7XG52YXIgX29wdGlvbnMgPSBudWxsO1xuXG4vL0Vycm9yIG1lc3NhZ2UgcmVzb3VyY2VzIGFyZSBtYWludGFpbmVkIGdsb2JhbGx5IGluIG9uZSBwbGFjZSBmb3IgZWFzeSBtYW5hZ2VtZW50XG52YXIgRVJST1JfTUVTU0FHRVMgPSB7XG4gICAgc2VuZGVyOiAnSW52YWxpZCBmcm9tIGFkZHJlc3MnLFxuICAgIHRvOiAnSW52YWxpZCB0byBhZGRyZXNzJyxcbiAgICBtc2c6ICdJbnZhbGlkIFRleHQgTWVzc2FnZScsXG4gICAgbXNnUGFyYW1zOiAnSW52YWxpZCBzaG9ydGNvZGUgbWVzc2FnZSBwYXJhbWV0ZXJzJyxcbiAgICBjb3VudHJ5Y29kZTogJ0ludmFsaWQgQ291bnRyeSBDb2RlJyxcbiAgICBtc2lzZG46ICdJbnZhbGlkIE1TSVNETiBwYXNzZWQnLFxuICAgIGJvZHk6ICdJbnZhbGlkIEJvZHkgdmFsdWUgaW4gQmluYXJ5IE1lc3NhZ2UnLFxuICAgIHVkaDogJ0ludmFsaWQgdWRoIHZhbHVlIGluIEJpbmFyeSBNZXNzYWdlJyxcbiAgICB0aXRsZTogJ0ludmFsaWQgdGl0bGUgaW4gV0FQIFB1c2ggbWVzc2FnZScsXG4gICAgdXJsOiAnSW52YWxpZCB1cmwgaW4gV0FQIFB1c2ggbWVzc2FnZScsXG4gICAgbWF4RGlnaXRzOiAnSW52YWxpZCBtYXggZGlnaXRzIGZvciBUVFMgcHJvbXB0JyxcbiAgICBieWVUZXh0OiAnSW52YWxpZCBieWUgdGV4dCBmb3IgVFRTIHByb21wdCcsXG4gICAgcGluQ29kZTogJ0ludmFsaWQgcGluIGNvZGUgZm9yIFRUUyBjb25maXJtJyxcbiAgICBmYWlsZWRUZXh0OiAnSW52YWxpZCBmYWlsZWQgdGV4dCBmb3IgVFRTIGNvbmZpcm0nLFxuICAgIGFuc3dlclVybDogJ0ludmFsaWQgYW5zd2VyIFVSTCBmb3IgY2FsbCcsXG4gIHZlcmlmeVZhbGlkYXRpb246J01pc3NpbmcgTWFuZGF0b3J5IGZpZWxkcyAobnVtYmVyIGFuZC9vciBicmFuZCknLFxuICBjaGVja1ZlcmlmeVZhbGlkYXRpb246J01pc3NpbmcgTWFuZGF0b3J5IGZpZWxkcyAocmVxdWVzdF9pZCBhbmQvb3IgY29kZSknLFxuICBjb250cm9sVmVyaWZ5VmFsaWRhdGlvbjonTWlzc2luZyBNYW5kYXRvcnkgZmllbGRzIChyZXF1ZXN0X2lkIGFuZC9vciBjbWQtY29tbWFuZCknLFxuICBzZWFyY2hWZXJpZnlWYWxpZGF0aW9uOidNaXNzaW5nIE1hbmRhdG9yeSBmaWVsZHMgKHJlcXVlc3RfaWQgb3IgcmVxdWVzdF9pZHMpJyxcbiAgbnVtYmVySW5zaWdodEFkdmFuY2VkVmFsaWRhdGlvbjonTWlzc2luZyBNYW5kYXRvcnkgZmllbGRzIChudW1iZXIgYW5kL29yIGNhbGxiYWNrIHVybCknLFxuICBudW1iZXJJbnNpZ2h0VmFsaWRhdGlvbjonTWlzc2luZyBNYW5kYXRvcnkgZmllbGQgLSBudW1iZXInLFxuICBudW1iZXJJbnNpZ2h0UGF0dGVybkZhaWx1cmU6J051bWJlciBjYW4gY29udGFpbiBkaWdpdHMgYW5kIG1heSBpbmNsdWRlIGFueSBvciBhbGwgb2YgdGhlIGZvbGxvd2luZzogd2hpdGUgc3BhY2UsIC0sKywgKCwgKS4nLFxuICBvcHRpb25zTm90QW5PYmplY3Q6J09wdGlvbnMgcGFyYW1ldGVyIHNob3VsZCBiZSBhIGRpY3Rpb25hcnkuIENoZWNrIHRoZSBkb2NzIGZvciB2YWxpZCBwcm9wZXJ0aWVzIGZvciBvcHRpb25zJyxcbiAgICBhcHBsaWNhdGlvbk5hbWU6ICdJbnZhbGlkIGFyZ3VtZW50OiBuYW1lJyxcbiAgICBhcHBsaWNhdGlvblR5cGU6ICdJbnZhbGlkIGFyZ3VtZW50OiB0eXBlICh2YWxpZCBvcHRpb25zOiBbdm9pY2VdKScsXG4gICAgYXBwbGljYXRpb25BbnN3ZXJVcmw6ICdJbnZhbGlkIGFyZ3VtZW50OiBhbnN3ZXJVcmwnLFxuICAgIGFwcGxpY2F0aW9uRXZlbnRVcmw6ICdJbnZhbGlkIGFyZ3VtZW50OiBldmVudFVybCcsXG4gICAgYXBwbGljYXRpb25JZDogJ0ludmFsaWQgYXJndW1lbnQ6IGFwcElkJyxcbiAgICBwcm9kdWN0OiAnSW52YWxpZCBwcm9kdWN0LiBTaG91bGQgYmUgb25lIG9mIFt2b2ljZSwgc21zXSdcbn07XG5cbmV4cG9ydHMuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKHBrZXksIHBzZWNyZXQsIG9wdGlvbnMpIHtcbiAgICBpZiAoIXBrZXkgfHwgIXBzZWNyZXQpIHtcbiAgICAgICAgdGhyb3cgJ2tleSBhbmQgc2VjcmV0IGNhbm5vdCBiZSBlbXB0eSwgc2V0IHZhbGlkIHZhbHVlcyc7XG4gICAgfVxuICAgIHVwID0ge1xuICAgICAgICBhcGlfa2V5OiBwa2V5LFxuICAgICAgICBhcGlfc2VjcmV0OiBwc2VjcmV0XG4gICAgfVxuICAgIF9vcHRpb25zID0gb3B0aW9ucztcbiAgICBpbml0aWFsaXplZCA9IHRydWU7XG59XG5cbmV4cG9ydHMuc2VuZEJpbmFyeU1lc3NhZ2UgPSBmdW5jdGlvbihzZW5kZXIsIHJlY2lwaWVudCwgYm9keSwgdWRoLCBjYWxsYmFjaykge1xuICAgIGlmICghYm9keSkge1xuICAgICAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5ib2R5KSk7XG4gICAgfSBlbHNlIGlmICghdWRoKSB7XG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLnVkaCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgIGZyb206IHNlbmRlcixcbiAgICAgICAgICAgIHRvOiByZWNpcGllbnQsXG4gICAgICAgICAgICB0eXBlOiAnYmluYXJ5JyxcbiAgICAgICAgICAgIGJvZHk6IGJvZHksXG4gICAgICAgICAgICB1ZGg6IHVkaFxuICAgICAgICB9LCBjYWxsYmFjayk7XG4gICAgfVxufVxuXG5leHBvcnRzLnNlbmRXYXBQdXNoTWVzc2FnZSA9IGZ1bmN0aW9uKHNlbmRlciwgcmVjaXBpZW50LCB0aXRsZSwgdXJsLCB2YWxpZGl0eSwgY2FsbGJhY2spIHtcbiAgICBpZiAoIXRpdGxlKSB7XG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLnRpdGxlKSk7XG4gICAgfSBlbHNlIGlmICghdXJsKSB7XG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLnVybCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsaWRpdHkgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSB2YWxpZGl0eTtcbiAgICAgICAgICAgIHZhbGlkaXR5ID0gODY0MDAwMDA7XG4gICAgICAgIH1cbiAgICAgICAgc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgZnJvbTogc2VuZGVyLFxuICAgICAgICAgICAgdG86IHJlY2lwaWVudCxcbiAgICAgICAgICAgIHR5cGU6ICd3YXBwdXNoJyxcbiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgIHZhbGlkaXR5OiB2YWxpZGl0eSxcbiAgICAgICAgICAgIHVybDogdXJsXG4gICAgICAgIH0sIGNhbGxiYWNrKTtcbiAgICB9XG59XG5cbmV4cG9ydHMuc2VuZFRleHRNZXNzYWdlID0gZnVuY3Rpb24oc2VuZGVyLCByZWNpcGllbnQsIG1lc3NhZ2UsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm1zZykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGJhY2sgPSBvcHRzO1xuICAgICAgICAgICAgb3B0cyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIG9wdHNbJ2Zyb20nXSA9IHNlbmRlcjtcbiAgICAgICAgb3B0c1sndG8nXSA9IHJlY2lwaWVudDtcbiAgICAgICAgb3B0c1sndGV4dCddID0gbWVzc2FnZTtcbiAgICAgICAgc2VuZE1lc3NhZ2Uob3B0cywgY2FsbGJhY2spO1xuICAgIH1cbn1cblxuZXhwb3J0cy5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uKG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgICAgIHNlbmRNZXNzYWdlKG9wdHMsIGNhbGxiYWNrKTtcbn1cbmZ1bmN0aW9uIHNlbmRNZXNzYWdlKGRhdGEsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFkYXRhLmZyb20pIHtcbiAgICAgICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuc2VuZGVyKSk7XG4gICAgfSBlbHNlIGlmICghZGF0YS50bykge1xuICAgICAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy50bykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwYXRoID0gY2xvbmUobXNncGF0aCk7XG4gICAgcGF0aC5wYXRoKz0gJz8nICsgcXVlcnlzdHJpbmcuc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICBfb3B0aW9ucy5sb2dnZXIuaW5mbygnc2VuZGluZyBtZXNzYWdlIGZyb20gJyArIGRhdGEuZnJvbSArICcgdG8gJyArIGRhdGEudG8gKyAnIHdpdGggbWVzc2FnZSAnICsgZGF0YS50ZXh0KTtcbiAgICAgICAgc2VuZFJlcXVlc3QocGF0aCwgJ1BPU1QnLCBmdW5jdGlvbihlcnIsIGFwaVJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZiAoIWVyciAmJiBhcGlSZXNwb25zZS5zdGF0dXMgJiYgYXBpUmVzcG9uc2UubWVzc2FnZXNbMF0uc3RhdHVzID4gMCkge1xuICAgICAgICAgICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKGFwaVJlc3BvbnNlLm1lc3NhZ2VzWzBdWydlcnJvci10ZXh0J10pLCBhcGlSZXNwb25zZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soZXJyLCBhcGlSZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2VuZFZpYVNob3J0Y29kZSh0eXBlLCByZWNpcGllbnQsIG1lc3NhZ2VQYXJhbXMsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFyZWNpcGllbnQpIHtcbiAgICAgICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMudG8pKTtcbiAgICB9XG4gICAgaWYgKCFtZXNzYWdlUGFyYW1zIHx8ICFPYmplY3Qua2V5cyhtZXNzYWdlUGFyYW1zKSkge1xuICAgICAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5tc2dQYXJhbXMpKTtcbiAgICB9XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgdmFyIHBhdGggPSBjbG9uZShzaG9ydGNvZGVQYXRoKTtcbiAgICBwYXRoLnBhdGggPSBwYXRoLnBhdGgucmVwbGFjZSgnJHt0eXBlfScsIHR5cGUpO1xuICAgIE9iamVjdC5rZXlzKG1lc3NhZ2VQYXJhbXMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIG9wdHNba2V5XSA9IG1lc3NhZ2VQYXJhbXNba2V5XTtcbiAgICB9KTtcbiAgICBvcHRzLnRvID0gcmVjaXBpZW50O1xuICAgIHBhdGgucGF0aCs9ICc/JyArIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShvcHRzKTtcbiAgICBfb3B0aW9ucy5sb2dnZXIuaW5mbygnc2VuZGluZyBtZXNzYWdlIGZyb20gc2hvcnRjb2RlICcgKyB0eXBlICsgJyB0byAnICsgcmVjaXBpZW50ICsgJyB3aXRoIHBhcmFtZXRlcnMgJyArIEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VQYXJhbXMpKTtcbiAgICBzZW5kUmVxdWVzdChwYXRoLCAnUE9TVCcsIGZ1bmN0aW9uKGVyciwgYXBpUmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKCFlcnIgJiYgYXBpUmVzcG9uc2Uuc3RhdHVzICYmIGFwaVJlc3BvbnNlLm1lc3NhZ2VzWzBdLnN0YXR1cyA+IDApIHtcbiAgICAgICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKGFwaVJlc3BvbnNlLm1lc3NhZ2VzWzBdWydlcnJvci10ZXh0J10pLCBhcGlSZXNwb25zZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKGVyciwgYXBpUmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5leHBvcnRzLnNob3J0Y29kZUFsZXJ0ID0gZnVuY3Rpb24ocmVjaXBpZW50LCBtZXNzYWdlUGFyYW1zLCBvcHRzLCBjYWxsYmFjaykge1xuICAgIHNlbmRWaWFTaG9ydGNvZGUoJ2FsZXJ0JywgcmVjaXBpZW50LCBtZXNzYWdlUGFyYW1zLCBvcHRzLCBjYWxsYmFjayk7XG59XG5leHBvcnRzLnNob3J0Y29kZTJGQSA9IGZ1bmN0aW9uKHJlY2lwaWVudCwgbWVzc2FnZVBhcmFtcywgb3B0cywgY2FsbGJhY2spIHtcbiAgICBzZW5kVmlhU2hvcnRjb2RlKCcyZmEnLCByZWNpcGllbnQsIG1lc3NhZ2VQYXJhbXMsIG9wdHMsIGNhbGxiYWNrKTtcbn1cbmV4cG9ydHMuc2hvcnRjb2RlTWFya2V0aW5nID0gZnVuY3Rpb24ocmVjaXBpZW50LCBtZXNzYWdlUGFyYW1zLCBvcHRzLCBjYWxsYmFjaykge1xuICAgIHNlbmRWaWFTaG9ydGNvZGUoJ21hcmtldGluZycsIHJlY2lwaWVudCwgbWVzc2FnZVBhcmFtcywgb3B0cywgY2FsbGJhY2spO1xufVxuXG5mdW5jdGlvbiBjbG9uZShhKSB7XG4gICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhKSk7XG59XG5cbmZ1bmN0aW9uIGdldEVuZHBvaW50KGFjdGlvbikge1xuICAgIHJldHVybiB7cGF0aDphY3Rpb259O1xufVxuXG5mdW5jdGlvbiBzZW5kUmVxdWVzdChlbmRwb2ludCwgbWV0aG9kLCBjYWxsYmFjaykge1xuICBlbmRwb2ludC5wYXRoID0gZW5kcG9pbnQucGF0aCArXG4gICAgICAgICAgICAgICAgICAoZW5kcG9pbnQucGF0aC5pbmRleE9mKCc/Jyk+MD8nJic6Jz8nKSArXG4gICAgICAgICAgICAgICAgICBxdWVyeXN0cmluZy5zdHJpbmdpZnkodXApO1xuICBfb3B0aW9ucy5odHRwQ2xpZW50LnJlcXVlc3QoZW5kcG9pbnQsIG1ldGhvZCwgY2FsbGJhY2spO1xufVxuXG5leHBvcnRzLmNoZWNrQmFsYW5jZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIGJhbGFuY2VFbmRwb2ludCA9IGdldEVuZHBvaW50KCcvYWNjb3VudC9nZXQtYmFsYW5jZScpO1xuICAgIHNlbmRSZXF1ZXN0KGJhbGFuY2VFbmRwb2ludCwgY2FsbGJhY2spO1xufVxuXG5leHBvcnRzLmdldFByaWNpbmcgPSBmdW5jdGlvbihjb3VudHJ5Q29kZSwgY2FsbGJhY2spIHtcbiAgICBpZiAoIWNvdW50cnlDb2RlIHx8IGNvdW50cnlDb2RlLmxlbmd0aCAhPSAyKSB7XG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmNvdW50cnljb2RlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHByaWNpbmdFbmRwb2ludCA9IGdldEVuZHBvaW50KCcvYWNjb3VudC9nZXQtcHJpY2luZy9vdXRib3VuZCcpO1xuICAgIHByaWNpbmdFbmRwb2ludC5wYXRoICs9ICc/Y291bnRyeT0nICsgY291bnRyeUNvZGU7XG4gICAgICAgIHNlbmRSZXF1ZXN0KHByaWNpbmdFbmRwb2ludCwgY2FsbGJhY2spO1xuICAgIH1cbn1cblxuZXhwb3J0cy5nZXRQaG9uZVByaWNpbmcgPSBmdW5jdGlvbihwcm9kdWN0LCBtc2lzZG4sIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFwcm9kdWN0IHx8IChwcm9kdWN0ICE9ICdzbXMnICYmIHByb2R1Y3QgIT0gJ3ZvaWNlJykpIHtcbiAgICAgICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMucHJvZHVjdCkpO1xuICAgIH0gZWxzZSBpZiAoIW1zaXNkbiB8fCBtc2lzZG4ubGVuZ3RoIDwgMTApIHsgLy8gY2hlY2sgaWYgTVNJU0ROIHZhbGlkYXRpb24gaXMgY29ycmVjdCBmb3IgaW50ZXJuYXRpb25hbCBudW1iZXJzXG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm1zaXNkbikpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwcmljaW5nRW5kcG9pbnQgPSBnZXRFbmRwb2ludCgnL2FjY291bnQvZ2V0LXBob25lLXByaWNpbmcvb3V0Ym91bmQnKTtcbiAgICAgICAgcHJpY2luZ0VuZHBvaW50LnBhdGggKz0gXCIvXCIgKyBwcm9kdWN0ICsgXCIvXCIgKyB1cC5hcGlfa2V5ICsgXCIvXCIgKyB1cC5hcGlfc2VjcmV0ICsgXCIvXCIgKyBtc2lzZG47XG4gICAgICAgIHNlbmRSZXF1ZXN0KHByaWNpbmdFbmRwb2ludCwgY2FsbGJhY2spO1xuICAgIH1cbn1cblxuZXhwb3J0cy5nZXROdW1iZXJzID0gZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICB2YXIgbnVtYmVyc0VuZHBvaW50ID0gZ2V0RW5kcG9pbnQoJy9hY2NvdW50L251bWJlcnMnKTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucyA9PSAnb2JqZWN0Jyl7XG4gICAgICAgIG51bWJlcnNFbmRwb2ludC5wYXRoID0gbnVtYmVyc0VuZHBvaW50LnBhdGggKyAnPyc7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKXtcbiAgICAgICAgICAgIG51bWJlcnNFbmRwb2ludC5wYXRoID0gbnVtYmVyc0VuZHBvaW50LnBhdGggKyBrZXkgKyAnPScgKyBvcHRpb25zW2tleV0gKyAnJidcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm9wdGlvbnNOb3RBbk9iamVjdCkpO1xuICAgIHJldHVybjtcbiAgICB9XG4gIHNlbmRSZXF1ZXN0KG51bWJlcnNFbmRwb2ludCwgY2FsbGJhY2spO1xufVxuXG5leHBvcnRzLnNlYXJjaE51bWJlcnMgPSBmdW5jdGlvbihjb3VudHJ5Q29kZSwgcGF0dGVybiwgY2FsbGJhY2spIHtcbiAgICBpZiAoIWNvdW50cnlDb2RlIHx8IGNvdW50cnlDb2RlLmxlbmd0aCAhPSAyKSB7XG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmNvdW50cnljb2RlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHNlYXJjaEVuZHBvaW50ID0gZ2V0RW5kcG9pbnQoJy9udW1iZXIvc2VhcmNoJykgO1xuICAgIHNlYXJjaEVuZHBvaW50LnBhdGggKz0gJz9jb3VudHJ5PScgKyBjb3VudHJ5Q29kZVxuICAgICAgICBpZiAodHlwZW9mIHBhdHRlcm4gPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBwYXR0ZXJuO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwYXR0ZXJuID09ICdvYmplY3QnKXtcbiAgICAgICAgICAgIHNlYXJjaEVuZHBvaW50LnBhdGggPSBzZWFyY2hFbmRwb2ludC5wYXRoICsgJyYnO1xuICAgICAgICAgICAgZm9yICh2YXIgYXJnIGluIHBhdHRlcm4pe1xuICAgICAgICAgICAgICAgIHNlYXJjaEVuZHBvaW50LnBhdGggPSBzZWFyY2hFbmRwb2ludC5wYXRoICsgYXJnICsgJz0nICsgcGF0dGVyblthcmddICsgJyYnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWFyY2hFbmRwb2ludC5wYXRoID0gc2VhcmNoRW5kcG9pbnQucGF0aCArICcmcGF0dGVybj0nICsgcGF0dGVybjtcbiAgICAgICAgfVxuICAgICAgICBzZW5kUmVxdWVzdChzZWFyY2hFbmRwb2ludCwgY2FsbGJhY2spO1xuICAgIH1cbn1cblxuZXhwb3J0cy5idXlOdW1iZXIgPSBmdW5jdGlvbihjb3VudHJ5Q29kZSwgbXNpc2RuLCBjYWxsYmFjaykge1xuICAgIGlmICghY291bnRyeUNvZGUgfHwgY291bnRyeUNvZGUubGVuZ3RoICE9IDIpIHtcbiAgICAgICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuY291bnRyeWNvZGUpKTtcbiAgICB9IGVsc2UgaWYgKCFtc2lzZG4gfHwgbXNpc2RuLmxlbmd0aCA8IDEwKSB7IC8vIGNoZWNrIGlmIE1TSVNETiB2YWxpZGF0aW9uIGlzIGNvcnJlY3QgZm9yIGludGVybmF0aW9uYWwgbnVtYmVyc1xuICAgICAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5tc2lzZG4pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYnV5RW5kcG9pbnQgPSBnZXRFbmRwb2ludCgnL251bWJlci9idXknKTtcbiAgICBidXlFbmRwb2ludC5wYXRoICs9ICc/Y291bnRyeT0nICsgY291bnRyeUNvZGUgKyAnJm1zaXNkbj0nICsgbXNpc2RuO1xuICAgICAgICBzZW5kUmVxdWVzdChidXlFbmRwb2ludCwgJ1BPU1QnLCBjYWxsYmFjayk7XG4gICAgfVxufVxuXG5leHBvcnRzLmNhbmNlbE51bWJlciA9IGZ1bmN0aW9uKGNvdW50cnlDb2RlLCBtc2lzZG4sIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFjb3VudHJ5Q29kZSB8fCBjb3VudHJ5Q29kZS5sZW5ndGggIT0gMikge1xuICAgICAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5jb3VudHJ5Y29kZSkpO1xuICAgIH0gZWxzZSBpZiAoIW1zaXNkbiB8fCBtc2lzZG4ubGVuZ3RoIDwgMTApIHtcbiAgICAgICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMubXNpc2RuKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGNhbmNlbEVuZHBvaW50ID0gZ2V0RW5kcG9pbnQoJy9udW1iZXIvY2FuY2VsJyk7XG4gICAgY2FuY2VsRW5kcG9pbnQucGF0aCArPSAnP2NvdW50cnk9JyArIGNvdW50cnlDb2RlICsgJyZtc2lzZG49JyArIG1zaXNkbjtcbiAgICAgICAgc2VuZFJlcXVlc3QoY2FuY2VsRW5kcG9pbnQsICdQT1NUJywgY2FsbGJhY2spO1xuICAgIH1cbn1cblxuZXhwb3J0cy5jYW5jZWxOdW1iZXIgPSBmdW5jdGlvbihjb3VudHJ5Q29kZSwgbXNpc2RuLCBjYWxsYmFjaykge1xuICAgIGlmICghY291bnRyeUNvZGUgfHwgY291bnRyeUNvZGUubGVuZ3RoICE9IDIpIHtcbiAgICAgICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuY291bnRyeWNvZGUpKTtcbiAgICB9IGVsc2UgaWYgKCFtc2lzZG4gfHwgbXNpc2RuLmxlbmd0aCA8IDEwKSB7XG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm1zaXNkbikpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjYW5jZWxFbmRwb2ludCA9IGdldEVuZHBvaW50KCcvbnVtYmVyL2NhbmNlbCcpO1xuICAgIGNhbmNlbEVuZHBvaW50LnBhdGggKz0gJz9jb3VudHJ5PScgKyBjb3VudHJ5Q29kZSArICcmbXNpc2RuPScgKyBtc2lzZG47XG4gICAgICAgIHNlbmRSZXF1ZXN0KGNhbmNlbEVuZHBvaW50LCAnUE9TVCcsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5cbmV4cG9ydHMudXBkYXRlTnVtYmVyID0gZnVuY3Rpb24oY291bnRyeUNvZGUsIG1zaXNkbiwgcGFyYW1zLCBjYWxsYmFjayl7XG4gICAgaWYgKCFjb3VudHJ5Q29kZSB8fCBjb3VudHJ5Q29kZS5sZW5ndGggIT0gMikge1xuICAgICAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5jb3VudHJ5Y29kZSkpO1xuICAgIH0gZWxzZSBpZiAoIW1zaXNkbiB8fCBtc2lzZG4ubGVuZ3RoIDwgMTApIHtcbiAgICAgICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMubXNpc2RuKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHVwZGF0ZUVuZHBvaW50ID0gZ2V0RW5kcG9pbnQoJy9udW1iZXIvdXBkYXRlJyk7XG4gIHVwZGF0ZUVuZHBvaW50LnBhdGggKz0gJz9jb3VudHJ5PScgKyBjb3VudHJ5Q29kZSArICcmbXNpc2RuPScgKyBtc2lzZG47XG4gICAgICAgIHVwZGF0ZUVuZHBvaW50LnBhdGggPSB1cGRhdGVFbmRwb2ludC5wYXRoICsgJyYnO1xuICAgICAgICBmb3IgKHZhciBhcmcgaW4gcGFyYW1zKXtcbiAgICAgICAgICAgIHVwZGF0ZUVuZHBvaW50LnBhdGggPSB1cGRhdGVFbmRwb2ludC5wYXRoICsgYXJnICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtc1thcmddKSArICcmJ1xuICAgICAgICB9XG4gICAgICAgIHNlbmRSZXF1ZXN0KHVwZGF0ZUVuZHBvaW50LCAnUE9TVCcsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5cbmV4cG9ydHMuZ2V0QXBwbGljYXRpb25zID0gZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICB2YXIgZW5kcG9pbnQgPSBnZXRFbmRwb2ludChhcHBsaWNhdGlvbnNFbmRwb2ludC5wYXRoKTtcbiAgICBlbmRwb2ludC5ob3N0ID0gYXBwbGljYXRpb25zRW5kcG9pbnQuaG9zdDtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucyA9PSAnb2JqZWN0Jyl7XG4gICAgICAgIGVuZHBvaW50LnBhdGggKz0gJz8nO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucyl7XG4gICAgICAgICAgICBlbmRwb2ludC5wYXRoICs9IChrZXkgKyAnPScgKyBvcHRpb25zW2tleV0gKyAnJicpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMub3B0aW9uc05vdEFuT2JqZWN0KSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gIHNlbmRSZXF1ZXN0KGVuZHBvaW50LCBjYWxsYmFjayk7XG59XG5cbmV4cG9ydHMuY3JlYXRlQXBwbGljYXRpb24gPSBmdW5jdGlvbihuYW1lLCB0eXBlLCBhbnN3ZXJVcmwsIGV2ZW50VXJsLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICBpZiAoIW5hbWUgfHwgbmFtZS5sZW5ndGggPCAxKSB7XG4gICAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5hcHBsaWNhdGlvbk5hbWUpKTtcbiAgfSBlbHNlIGlmICghdHlwZSB8fCB0eXBlICE9ICd2b2ljZScpIHtcbiAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmFwcGxpY2F0aW9uVHlwZSkpO1xuICB9IGVsc2UgaWYgKCFhbnN3ZXJVcmwpIHtcbiAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmFwcGxpY2F0aW9uQW5zd2VyVXJsKSk7XG4gIH0gZWxzZSBpZiAoIWV2ZW50VXJsKSB7XG4gICAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5hcHBsaWNhdGlvbkV2ZW50VXJsKSk7XG4gIH0gZWxzZSB7XG4gICAgICB2YXIgY3JlYXRlRW5kcG9pbnQgPSBnZXRFbmRwb2ludChhcHBsaWNhdGlvbnNFbmRwb2ludC5wYXRoKTtcbiAgICAgIGNyZWF0ZUVuZHBvaW50Lmhvc3QgPSBhcHBsaWNhdGlvbnNFbmRwb2ludC5ob3N0O1xuICAgICAgY3JlYXRlRW5kcG9pbnQucGF0aCArPSAoJz9uYW1lPScgKyBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnJnR5cGU9JyArIHR5cGUgICsgJyZhbnN3ZXJfdXJsPScgKyBhbnN3ZXJVcmwgICsgJyZldmVudF91cmw9JyArIGV2ZW50VXJsKTtcbiAgICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKXtcbiAgICAgICAgICBjcmVhdGVFbmRwb2ludC5wYXRoICs9ICgnJicgKyBrZXkgKyAnPScgKyBvcHRpb25zW2tleV0pO1xuICAgICAgfVxuICAgICAgc2VuZFJlcXVlc3QoY3JlYXRlRW5kcG9pbnQsICdQT1NUJywgY2FsbGJhY2spO1xuICB9XG59XG5cbmV4cG9ydHMuZ2V0QXBwbGljYXRpb24gPSBmdW5jdGlvbihhcHBJZCwgY2FsbGJhY2spIHtcbiAgaWYgKCFhcHBJZCB8fCBhcHBJZC5sZW5ndGggPCAzNikge1xuICAgICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuYXBwbGljYXRpb25JZCkpO1xuICB9IGVsc2Uge1xuICAgICAgdmFyIHNob3dFbmRwb2ludCA9IGdldEVuZHBvaW50KGFwcGxpY2F0aW9uc0VuZHBvaW50LnBhdGggKyBcIi9cIiArIGFwcElkKTtcbiAgICAgIHNob3dFbmRwb2ludC5ob3N0ID0gYXBwbGljYXRpb25zRW5kcG9pbnQuaG9zdDtcbiAgICAgIHNlbmRSZXF1ZXN0KHNob3dFbmRwb2ludCwgY2FsbGJhY2spO1xuICB9XG59XG5cbmV4cG9ydHMudXBkYXRlQXBwbGljYXRpb24gPSBmdW5jdGlvbihhcHBJZCwgbmFtZSwgdHlwZSwgYW5zd2VyVXJsLCBldmVudFVybCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgaWYgKCFhcHBJZCB8fCBhcHBJZC5sZW5ndGggPCAzNikge1xuICAgICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuYXBwbGljYXRpb25JZCkpO1xuICB9IGVsc2UgaWYgKCFuYW1lIHx8IG5hbWUubGVuZ3RoIDwgMSkge1xuICAgICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuYXBwbGljYXRpb25OYW1lKSk7XG4gIH0gZWxzZSBpZiAoIXR5cGUgfHwgdHlwZSAhPSAndm9pY2UnKSB7XG4gICAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5hcHBsaWNhdGlvblR5cGUpKTtcbiAgfSBlbHNlIGlmICghYW5zd2VyVXJsKSB7XG4gICAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5hcHBsaWNhdGlvbkFuc3dlclVybCkpO1xuICB9IGVsc2UgaWYgKCFldmVudFVybCkge1xuICAgICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuYXBwbGljYXRpb25FdmVudFVybCkpO1xuICB9IGVsc2Uge1xuICAgICAgdmFyIHVwZGF0ZUVuZHBvaW50ID0gZ2V0RW5kcG9pbnQoYXBwbGljYXRpb25zRW5kcG9pbnQucGF0aCArIFwiL1wiICsgYXBwSWQpO1xuICAgICAgdXBkYXRlRW5kcG9pbnQucGF0aCArPSAoJz9uYW1lPScgKyBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnJnR5cGU9JyArIHR5cGUgICsgJyZhbnN3ZXJfdXJsPScgKyBhbnN3ZXJVcmwgICsgJyZldmVudF91cmw9JyArIGV2ZW50VXJsKTtcbiAgICAgIHVwZGF0ZUVuZHBvaW50Lmhvc3QgPSBhcHBsaWNhdGlvbnNFbmRwb2ludC5ob3N0O1xuICAgICAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMpe1xuICAgICAgICAgIHVwZGF0ZUVuZHBvaW50LnBhdGggPSB1cGRhdGVFbmRwb2ludC5wYXRoICsgJyYnICsga2V5ICsgJz0nICsgb3B0aW9uc1trZXldO1xuICAgICAgfVxuICAgICAgc2VuZFJlcXVlc3QodXBkYXRlRW5kcG9pbnQsICdQVVQnLCBjYWxsYmFjayk7XG4gIH1cbn1cblxuZXhwb3J0cy5kZWxldGVBcHBsaWNhdGlvbiA9IGZ1bmN0aW9uKGFwcElkLCBjYWxsYmFjaykge1xuICBpZiAoIWFwcElkIHx8IGFwcElkLmxlbmd0aCA8IDM2KSB7XG4gICAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5hcHBsaWNhdGlvbklkKSk7XG4gIH0gZWxzZSB7XG4gICAgICB2YXIgZGVsZXRlRW5kcG9pbnQgPSBnZXRFbmRwb2ludChhcHBsaWNhdGlvbnNFbmRwb2ludC5wYXRoICsgXCIvXCIgKyBhcHBJZCk7XG4gICAgICBkZWxldGVFbmRwb2ludC5ob3N0ID0gYXBwbGljYXRpb25zRW5kcG9pbnQuaG9zdDtcbiAgICAgIHNlbmRSZXF1ZXN0KGRlbGV0ZUVuZHBvaW50LCAnREVMRVRFJywgY2FsbGJhY2spO1xuICB9XG59XG5cblxuZXhwb3J0cy5jaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uKG5ld1NlY3JldCwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2V0dGluZ3NFbmRwb2ludCA9IGdldEVuZHBvaW50KCcvYWNjb3VudC9zZXR0aW5ncycpO1xuICBzZXR0aW5nc0VuZHBvaW50LnBhdGggKz0gJz9uZXdTZWNyZXQ9JyArIGVuY29kZVVSSUNvbXBvbmVudChuZXdTZWNyZXQpO1xuICAgIHNlbmRSZXF1ZXN0KHNldHRpbmdzRW5kcG9pbnQsICdQT1NUJywgY2FsbGJhY2spO1xufVxuXG5leHBvcnRzLmNoYW5nZU1vQ2FsbGJhY2tVcmwgPSBmdW5jdGlvbihuZXdVcmwsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNldHRpbmdzRW5kcG9pbnQgPSBnZXRFbmRwb2ludCgnL2FjY291bnQvc2V0dGluZ3MnKTtcbiAgc2V0dGluZ3NFbmRwb2ludC5wYXRoICArPSAnP21vQ2FsbEJhY2tVcmw9JyArIGVuY29kZVVSSUNvbXBvbmVudChuZXdVcmwpO1xuICAgIHNlbmRSZXF1ZXN0KHNldHRpbmdzRW5kcG9pbnQsICdQT1NUJywgY2FsbGJhY2spO1xufVxuXG5leHBvcnRzLmNoYW5nZURyQ2FsbGJhY2tVcmwgPSBmdW5jdGlvbihuZXdVcmwsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNldHRpbmdzRW5kcG9pbnQgPSBnZXRFbmRwb2ludCgnL2FjY291bnQvc2V0dGluZ3MnKTtcbiAgc2V0dGluZ3NFbmRwb2ludC5wYXRoICArPSAnP2RyQ2FsbEJhY2tVcmw9JyArIGVuY29kZVVSSUNvbXBvbmVudChuZXdVcmwpO1xuICAgIHNlbmRSZXF1ZXN0KHNldHRpbmdzRW5kcG9pbnQsICdQT1NUJywgY2FsbGJhY2spO1xufVxuXG5leHBvcnRzLnZlcmlmeU51bWJlciA9IGZ1bmN0aW9uKGlucHV0UGFyYW1zLCBjYWxsYmFjaykge1xuICBpZiAoIWlucHV0UGFyYW1zLm51bWJlciB8fCAhaW5wdXRQYXJhbXMuYnJhbmQgKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMudmVyaWZ5VmFsaWRhdGlvbikpO1xuICAgIH0gZWxzZSB7XG4gICAgdmFyIHZFbmRwb2ludCA9IGNsb25lKHZlcmlmeUVuZHBvaW50KTtcbiAgICB2RW5kcG9pbnQucGF0aCArPSAnPycgKyBxdWVyeXN0cmluZy5zdHJpbmdpZnkoaW5wdXRQYXJhbXMpO1xuICAgICAgICBzZW5kUmVxdWVzdCh2RW5kcG9pbnQsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5cbmV4cG9ydHMuY2hlY2tWZXJpZnlSZXF1ZXN0ID0gZnVuY3Rpb24oaW5wdXRQYXJhbXMsIGNhbGxiYWNrKSB7XG4gIGlmICghaW5wdXRQYXJhbXMucmVxdWVzdF9pZCB8fCAhaW5wdXRQYXJhbXMuY29kZSApIHtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5jaGVja1ZlcmlmeVZhbGlkYXRpb24pKTtcbiAgICB9IGVsc2Uge1xuICAgIHZhciB2RW5kcG9pbnQgPSBjbG9uZShjaGVja1ZlcmlmeUVuZHBvaW50KTtcbiAgICB2RW5kcG9pbnQucGF0aCArPSAnPycgKyBxdWVyeXN0cmluZy5zdHJpbmdpZnkoaW5wdXRQYXJhbXMpO1xuICAgICAgICBzZW5kUmVxdWVzdCh2RW5kcG9pbnQsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5cbmV4cG9ydHMuY29udHJvbFZlcmlmeVJlcXVlc3QgPSBmdW5jdGlvbihpbnB1dFBhcmFtcywgY2FsbGJhY2spIHtcbiAgaWYgKCFpbnB1dFBhcmFtcy5yZXF1ZXN0X2lkIHx8ICFpbnB1dFBhcmFtcy5jbWQgKSB7XG4gICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMuY29udHJvbFZlcmlmeVZhbGlkYXRpb24pKTtcbiAgICB9IGVsc2Uge1xuICAgIHZhciB2RW5kcG9pbnQgPSBjbG9uZShjb250cm9sVmVyaWZ5RW5kcG9pbnQpO1xuICAgIHZFbmRwb2ludC5wYXRoICs9ICc/JyArIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShpbnB1dFBhcmFtcyk7XG4gICAgICAgIHNlbmRSZXF1ZXN0KHZFbmRwb2ludCwgY2FsbGJhY2spO1xuICAgIH1cbn1cblxuZXhwb3J0cy5zZWFyY2hWZXJpZnlSZXF1ZXN0ID0gZnVuY3Rpb24ocmVxdWVzdElkcywgY2FsbGJhY2spIHtcbiAgdmFyIHJlcXVlc3RJZFBhcmFtID0ge307XG4gIGlmICghcmVxdWVzdElkcykge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLnNlYXJjaFZlcmlmeVZhbGlkYXRpb24pKTtcbiAgICB9IGVsc2Uge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHJlcXVlc3RJZHMpICkge1xuICAgICAgaWYgKHJlcXVlc3RJZHMubGVuZ3RoID09MSkge1xuICAgICAgICByZXF1ZXN0SWRQYXJhbS5yZXF1ZXN0X2lkPXJlcXVlc3RJZHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXF1ZXN0SWRQYXJhbS5yZXF1ZXN0X2lkcz1yZXF1ZXN0SWRzO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXF1ZXN0SWRQYXJhbS5yZXF1ZXN0X2lkPXJlcXVlc3RJZHM7XG4gICAgfVxuICAgIHZhciB2RW5kcG9pbnQgPSBjbG9uZShzZWFyY2hWZXJpZnlFbmRwb2ludCk7XG4gICAgdkVuZHBvaW50LnBhdGggKz0gJz8nICsgcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHJlcXVlc3RJZFBhcmFtKTtcbiAgICAgICAgc2VuZFJlcXVlc3QodkVuZHBvaW50LCBjYWxsYmFjayk7XG4gICAgfVxufVxuXG5leHBvcnRzLm51bWJlckluc2lnaHQgPSBmdW5jdGlvbihpbnB1dFBhcmFtcywgY2FsbGJhY2spIHtcbiAgbnVtYmVySW5zaWdodEFzeW5jKGlucHV0UGFyYW1zLCBjYWxsYmFjayk7XG59XG5cbmV4cG9ydHMubnVtYmVySW5zaWdodEJhc2ljID0gZnVuY3Rpb24oaW5wdXRQYXJhbXMsIGNhbGxiYWNrKSB7XG4gIG51bWJlckluc2lnaHRDb21tb24obmlCYXNpY0VuZHBvaW50LGlucHV0UGFyYW1zLGNhbGxiYWNrKVxufVxuXG5leHBvcnRzLm51bWJlckluc2lnaHRTdGFuZGFyZCA9IGZ1bmN0aW9uKGlucHV0UGFyYW1zLCBjYWxsYmFjaykge1xuICBudW1iZXJJbnNpZ2h0Q29tbW9uKG5pU3RhbmRhcmRFbmRwb2ludCxpbnB1dFBhcmFtcyxjYWxsYmFjaylcbn1cblxuZXhwb3J0cy5udW1iZXJJbnNpZ2h0QWR2YW5jZWQgPSBmdW5jdGlvbihpbnB1dFBhcmFtcywgY2FsbGJhY2spIHtcbiAgbnVtYmVySW5zaWdodENvbW1vbihuaUFkdmFuY2VkRW5kcG9pbnQsaW5wdXRQYXJhbXMsY2FsbGJhY2spXG59XG5cbmV4cG9ydHMubnVtYmVySW5zaWdodEFkdmFuY2VkQXN5bmMgPSBmdW5jdGlvbihpbnB1dFBhcmFtcywgY2FsbGJhY2spIHtcbiAgbnVtYmVySW5zaWdodEFzeW5jKGlucHV0UGFyYW1zLCBjYWxsYmFjayk7XG59XG5cbmZ1bmN0aW9uIG51bWJlckluc2lnaHRBc3luYyhpbnB1dFBhcmFtcywgY2FsbGJhY2spIHtcbiAgaWYgKCFpbnB1dFBhcmFtcy5udW1iZXIgfHwgISBpbnB1dFBhcmFtcy5jYWxsYmFjaykge1xuICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm51bWJlckluc2lnaHRBZHZhbmNlZFZhbGlkYXRpb24pKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgbkVuZHBvaW50ID0gY2xvbmUobmlFbmRwb2ludCk7XG4gICAgbkVuZHBvaW50LnBhdGggKz0gJz8nICsgcXVlcnlzdHJpbmcuc3RyaW5naWZ5KGlucHV0UGFyYW1zKTtcbiAgICBzZW5kUmVxdWVzdChuRW5kcG9pbnQsIGNhbGxiYWNrKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBudW1iZXJJbnNpZ2h0Q29tbW9uKGVuZHBvaW50LGlucHV0UGFyYW1zLGNhbGxiYWNrKSB7XG4gIGlmICh2YWxpZGF0ZU51bWJlcihpbnB1dFBhcmFtcyxjYWxsYmFjaykpe1xuICAgIHZhciBpbnB1dE9iajtcbiAgICBpZiAodHlwZW9mIGlucHV0UGFyYW1zICE9ICdvYmplY3QnKSB7XG4gICAgICBpbnB1dE9iaiA9IHtudW1iZXI6aW5wdXRQYXJhbXN9O1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnB1dE9iaiA9IGlucHV0UGFyYW1zO1xuICAgIH1cbiAgICB2YXIgbkVuZHBvaW50ID0gY2xvbmUoZW5kcG9pbnQpO1xuICAgIG5FbmRwb2ludC5wYXRoICs9ICc/JyArIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShpbnB1dE9iaik7XG4gICAgICBzZW5kUmVxdWVzdChuRW5kcG9pbnQsIGNhbGxiYWNrKTtcbiAgfVxufVxuZnVuY3Rpb24gdmFsaWRhdGVOdW1iZXIoaW5wdXRQYXJhbXMsY2FsbGJhY2spIHtcbiAgaWYgKCh0eXBlb2YgaW5wdXRQYXJhbXMgPT0gJ29iamVjdCcpICYmICFpbnB1dFBhcmFtcy5udW1iZXIpIHtcbiAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm51bWJlckluc2lnaHRWYWxpZGF0aW9uKSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSBpZiAoKHR5cGVvZiBpbnB1dFBhcmFtcyA9PSAnb2JqZWN0JykgJiYgIW51bWJlclBhdHRlcm4udGVzdChpbnB1dFBhcmFtcy5udW1iZXIpKSB7XG4gICAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5udW1iZXJJbnNpZ2h0UGF0dGVybkZhaWx1cmUpKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKCh0eXBlb2YgaW5wdXRQYXJhbXMgIT0gJ29iamVjdCcpICYmICghaW5wdXRQYXJhbXMgfHwgIW51bWJlclBhdHRlcm4udGVzdChpbnB1dFBhcmFtcykpKXtcbiAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5udW1iZXJJbnNpZ2h0UGF0dGVybkZhaWx1cmUpKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHNlbmRWb2ljZU1lc3NhZ2Uodm9pY2VFbmRwb2ludCwgZGF0YSwgY2FsbGJhY2spIHtcbiAgICBpZiAoIWRhdGEudG8pIHtcbiAgICAgICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMudG8pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZW5kcG9pbnQgPSBjbG9uZSh2b2ljZUVuZHBvaW50KTtcbiAgICBlbmRwb2ludC5wYXRoICs9ICc/JyArIHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgX29wdGlvbnMubG9nZ2VyLmluZm8oJ3NlbmRpbmcgVFRTIG1lc3NhZ2UgdG8gJyArIGRhdGEudG8gKyAnIHdpdGggbWVzc2FnZSAnICsgZGF0YS50ZXh0KTtcbiAgICAgICAgc2VuZFJlcXVlc3QoZW5kcG9pbnQsICdQT1NUJywgZnVuY3Rpb24oZXJyLCBhcGlSZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKCFlcnIgJiYgYXBpUmVzcG9uc2Uuc3RhdHVzICYmIGFwaVJlc3BvbnNlLnN0YXR1cyA+IDApIHtcbiAgICAgICAgICAgICAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihhcGlSZXNwb25zZVsnZXJyb3ItdGV4dCddKSwgYXBpUmVzcG9uc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKGVyciwgYXBpUmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydHMuc2VuZFRUU01lc3NhZ2UgPSBmdW5jdGlvbihyZWNpcGllbnQsIG1lc3NhZ2UsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm1zZykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghb3B0cykge1xuICAgICAgICAgICAgb3B0cyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIG9wdHNbJ3RvJ10gPSByZWNpcGllbnQ7XG4gICAgICAgIG9wdHNbJ3RleHQnXSA9IG1lc3NhZ2U7XG4gICAgICAgIHNlbmRWb2ljZU1lc3NhZ2UodHRzRW5kcG9pbnQsIG9wdHMsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5cbmV4cG9ydHMuc2VuZFRUU1Byb21wdFdpdGhDYXB0dXJlID0gZnVuY3Rpb24ocmVjaXBpZW50LCBtZXNzYWdlLCBtYXhEaWdpdHMsIGJ5ZVRleHQsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLm1zZykpO1xuICAgIH0gZWxzZSBpZiAoIW1heERpZ2l0cyB8fCBpc05hTihtYXhEaWdpdHMpIHx8IG1heERpZ2l0cy5sZW5ndGggPiAxNikge1xuICAgICAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5tYXhEaWdpdHMpKTtcbiAgICB9IGVsc2UgaWYgKCFieWVUZXh0KSB7XG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmJ5ZVRleHQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIW9wdHMpIHtcbiAgICAgICAgICAgIG9wdHMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBvcHRzWyd0byddID0gcmVjaXBpZW50O1xuICAgICAgICBvcHRzWyd0ZXh0J10gPSBtZXNzYWdlO1xuICAgICAgICBvcHRzWydtYXhfZGlnaXRzJ10gPSBtYXhEaWdpdHM7XG4gICAgICAgIG9wdHNbJ2J5ZV90ZXh0J10gPSBieWVUZXh0O1xuICAgICAgICBzZW5kVm9pY2VNZXNzYWdlKHR0c1Byb21wdEVuZHBvaW50LCBvcHRzLCBjYWxsYmFjayk7XG4gICAgfVxufVxuXG5leHBvcnRzLnNlbmRUVFNQcm9tcHRXaXRoQ29uZmlybSA9IGZ1bmN0aW9uKHJlY2lwaWVudCwgbWVzc2FnZSwgbWF4RGlnaXRzLCBwaW5Db2RlLCBieWVUZXh0LCBmYWlsZWRUZXh0LCBvcHRzLCBjYWxsYmFjaykge1xuICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgICBzZW5kRXJyb3IoY2FsbGJhY2ssIG5ldyBFcnJvcihFUlJPUl9NRVNTQUdFUy5tc2cpKTtcbiAgICB9IGVsc2UgaWYgKCFtYXhEaWdpdHMgfHwgaXNOYU4obWF4RGlnaXRzKSB8fCBtYXhEaWdpdHMubGVuZ3RoID4gMTYpIHtcbiAgICAgICAgc2VuZEVycm9yKGNhbGxiYWNrLCBuZXcgRXJyb3IoRVJST1JfTUVTU0FHRVMubWF4RGlnaXRzKSk7XG4gICAgfSBlbHNlIGlmICghcGluQ29kZSB8fCBwaW5Db2RlLmxlbmd0aCAhPT0gbWF4RGlnaXRzKSB7XG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLnBpbkNvZGUpKTtcbiAgICB9IGVsc2UgaWYgKCFieWVUZXh0KSB7XG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmJ5ZVRleHQpKTtcbiAgICB9IGVsc2UgaWYgKCFmYWlsZWRUZXh0KSB7XG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmZhaWxlZFRleHQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIW9wdHMpIHtcbiAgICAgICAgICAgIG9wdHMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBvcHRzWyd0byddID0gcmVjaXBpZW50O1xuICAgICAgICBvcHRzWyd0ZXh0J10gPSBtZXNzYWdlO1xuICAgICAgICBvcHRzWydtYXhfZGlnaXRzJ10gPSBtYXhEaWdpdHM7XG4gICAgICAgIG9wdHNbJ3Bpbl9jb2RlJ10gPSBwaW5Db2RlO1xuICAgICAgICBvcHRzWydieWVfdGV4dCddID0gYnllVGV4dDtcbiAgICAgICAgb3B0c1snZmFpbGVkX3RleHQnXSA9IGZhaWxlZFRleHQ7XG4gICAgICAgIHNlbmRWb2ljZU1lc3NhZ2UodHRzUHJvbXB0RW5kcG9pbnQsIG9wdHMsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5cbmV4cG9ydHMuY2FsbCA9IGZ1bmN0aW9uKHJlY2lwaWVudCwgYW5zd2VyVXJsLCBvcHRzLCBjYWxsYmFjaykge1xuICAgIGlmICghYW5zd2VyVXJsKSB7XG4gICAgICAgIHNlbmRFcnJvcihjYWxsYmFjaywgbmV3IEVycm9yKEVSUk9SX01FU1NBR0VTLmFuc3dlclVybCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghb3B0cykge1xuICAgICAgICAgICAgb3B0cyA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIG9wdHNbJ3RvJ10gPSByZWNpcGllbnQ7XG4gICAgICAgIG9wdHNbJ2Fuc3dlcl91cmwnXSA9IGFuc3dlclVybDtcbiAgICAgICAgc2VuZFZvaWNlTWVzc2FnZShjYWxsRW5kcG9pbnQsIG9wdHMsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNlbmRFcnJvcihjYWxsYmFjaywgZXJyLCByZXR1cm5EYXRhKSB7XG4gICAgLy8gVGhyb3cgdGhlIGVycm9yIGluIGNhc2UgaWYgdGhlcmUgaXMgbm8gY2FsbGJhY2sgcGFzc2VkXG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKGVyciwgcmV0dXJuRGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbn1cblxuZXhwb3J0cy5zZXRIb3N0ID0gZnVuY3Rpb24oYUhvc3QpIHtcbiAgICBtc2dwYXRoLmhvc3QgPSBhSG9zdDtcbiAgICBzaG9ydGNvZGVQYXRoLmhvc3QgPSBhSG9zdDtcbiAgICB0dHNFbmRwb2ludC5ob3N0ID0gYUhvc3Q7XG4gICAgdHRzUHJvbXB0RW5kcG9pbnQuaG9zdCA9IGFIb3N0O1xuICAgIGNhbGxFbmRwb2ludC5ob3N0ID0gYUhvc3Q7XG4gICAgdmVyaWZ5RW5kcG9pbnQuaG9zdCA9IGFIb3N0O1xuICAgIGNoZWNrVmVyaWZ5RW5kcG9pbnQuaG9zdCA9IGFIb3N0O1xuICAgIGNvbnRyb2xWZXJpZnlFbmRwb2ludC5ob3N0ID0gYUhvc3Q7XG4gICAgc2VhcmNoVmVyaWZ5RW5kcG9pbnQuaG9zdCA9IGFIb3N0O1xuICAgIG5pRW5kcG9pbnQuaG9zdCA9IGFIb3N0O1xuICBuaUJhc2ljRW5kcG9pbnQuaG9zdCA9IGFIb3N0O1xuICBuaVN0YW5kYXJkRW5kcG9pbnQuaG9zdCA9IGFIb3N0O1xuICBhcHBsaWNhdGlvbnNFbmRwb2ludC5ob3N0ID0gYUhvc3Q7XG59XG5cbmV4cG9ydHMuc2V0UG9ydCA9IGZ1bmN0aW9uKGFQb3J0KSB7XG4gIHBvcnQgPSBhUG9ydDtcbn1cbiJdfQ==